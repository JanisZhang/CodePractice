## Volatile关键字

轻量级锁

CPU主内存的读写速度远远落后于CPU cache的速度， Cache的出现是为了解决CPU直接访问内存效率低下的问题。CPU通过直接访问cache的方式， 替代了直接访问主内存， 提高了CPU的吞吐能力。缓存的出现提高了CPU的吞吐能力， 但是也存在**缓存不一致**的问题。  
比如 i++操作：
1. 读取主内存的 i 到CPU cache中
2. 执行i++
3. 将结果写入CPU cache中
4. 将cache中的结果刷新到主内存中
  
通过缓存一致性协议解决问题。  
#### JVM如何保证并发编程的三个特性： 原子性， 有序性， 可见性？
可见性， 有序性（happens-before）： 
1. 使用关键字volatile。当一个变量被volatile修饰的时候， 对共享资源的**读**操作会直接在主内存中进行。 对共享资源的**写**操作会先修改工作内存， 在修改之后会立即将其刷新到主内存当中。
2. synchronized关键字
3. 通过lock

被Volatile修饰的实例变量或类变量有以下含义：
1. 保证了不同线程之间对共享变量操作的可见行，也就是说当thread 1修改volatile修饰的变量， thread 2会立刻看到最新的值。
2. 禁止对指令进行重排序操作。
3. volatile无法保证原子性。

## 7种单例设计模式


